# 🥷 ニンジャの忍び足 - ゲーム構想・要件定義書

## 1. ゲーム概要

### 1.1 基本コンセプト
- **ゲーム名**: ニンジャの忍び足（Ninja Stealth Mission）
- **ジャンル**: 2Dトップダウン・ステルスアクションゲーム
- **テーマ**: 敵に見つからずに敵地から宝物を盗んで脱出する忍者ミッション
- **対象**: 全年齢、ステルスゲーム好き、パズル・戦略ゲームファン

### 1.2 ゲームの魅力
- **緊張感**: 敵に発見される恐怖とスリル
- **戦略性**: ルート計画と タイミング判断
- **達成感**: 完璧な潜入と脱出の成功
- **リプレイ性**: 複数のクリアルートと改善の余地

## 2. ゲームシステム

### 2.1 基本ルール
1. **目標**: 各ステージの宝物をすべて回収して脱出ポイントに到達
2. **制約**: 敵に発見されずにミッションを遂行
3. **失敗条件**: 敵に3回発見されるとミッション失敗
4. **成功条件**: 全宝物回収 + 脱出成功

### 2.2 視界システム
- **敵の視界**: 前方120度、範囲3-5マス
- **視界の可視化**: 敵の向いている方向に薄い赤色の扇形表示
- **障害物**: 壁・箱の後ろは視界が遮られる
- **暗闇**: 特定エリアは視界が短くなる

### 2.3 音響システム
- **足音**: 通常移動で小さな音、走ると大きな音
- **音の伝播**: 2マス範囲で敵が音に反応
- **静音移動**: しゃがみ移動で足音を消せる（移動速度半減）
- **注意状態**: 音を聞いた敵は5秒間警戒状態になる

## 3. キャラクター設計

### 3.1 プレイヤー（忍者）
- **外見**: 18個のニンジャGIFからランダム or 選択可能
- **移動**: 4方向（上下左右）
- **状態**: 通常・しゃがみ・隠れ・発見済み
- **能力**: 
  - 通常移動（速い、足音あり）
  - しゃがみ移動（遅い、静音）
  - 隠れる（障害物の後ろで完全ステルス）

### 3.2 敵キャラクター（警備兵）
- **外見**: ニンジャGIFの一部を警備兵として使用
- **AI パターン**:
  - **巡回型**: 決められたルートを往復
  - **定点型**: 一箇所で左右を見回し
  - **不規則型**: ランダムに方向転換
- **状態**:
  - 通常巡回（緑色視界）
  - 警戒中（黄色視界、音に反応）
  - 発見時（赤色視界、プレイヤーを追跡）

### 3.3 忍術システム
- **煙玉**: 一時的に視界を遮る（1回/ステージ）
- **分身術**: おとりを作って敵を誘導（1回/ステージ）
- **透明化**: 3秒間敵に発見されない（最終ステージのみ）

## 4. ステージ設計

### 4.1 基本構成要素
- **壁**: 移動不可、視界を遮る
- **箱・障害物**: 隠れることができる
- **宝物**: 収集対象（💎 💰 👑 🏺など）
- **脱出ポイント**: ゴール地点（🚪）
- **床**: 通常床・石床（足音あり）・絨毯（足音なし）

### 4.2 ステージ一覧

#### ステージ1: 「修行の館」（チュートリアル）
- **サイズ**: 8×8マス
- **敵数**: 1体（定点型）
- **宝物**: 1個
- **特徴**: 基本操作を学ぶシンプルな構造

#### ステージ2: 「庭園の忍び込み」
- **サイズ**: 10×8マス
- **敵数**: 2体（巡回型×2）
- **宝物**: 2個
- **特徴**: 庭園の植え込みに隠れながら潜入

#### ステージ3: 「倉庫の宝」
- **サイズ**: 12×10マス
- **敵数**: 3体（巡回型×2、定点型×1）
- **宝物**: 3個
- **特徴**: 箱が多く配置された倉庫

#### ステージ4: 「屋敷の奥座敷」
- **サイズ**: 10×12マス
- **敵数**: 3体（不規則型×1、巡回型×2）
- **宝物**: 4個
- **特徴**: 複雑な部屋構造、音響トラップあり

#### ステージ5: 「城の天守閣」（最終ステージ）
- **サイズ**: 15×12マス
- **敵数**: 5体（全タイプ）
- **宝物**: 5個
- **特徴**: 最高難易度、忍術すべて使用可能

### 4.3 難易度カーブ
- **ステージ1**: 操作習得
- **ステージ2**: 基本戦略
- **ステージ3**: 複数敵の対処
- **ステージ4**: 高度な判断力
- **ステージ5**: マスタリーチャレンジ

## 5. ゲームフロー

### 5.1 メイン画面
1. **ステージ選択**: 解放済みステージから選択
2. **忍者選択**: 使用するニンジャGIFを選択
3. **ゲーム開始**: ステージに入る

### 5.2 ゲーム中
1. **ミッション開始**: スタート地点に配置
2. **潜入フェーズ**: 宝物回収
3. **脱出フェーズ**: ゴールへ向かう
4. **結果判定**: 成功/失敗

### 5.3 リザルト画面
- **評価**: S/A/B/C ランク
- **統計**: 発見回数、クリア時間、忍術使用回数
- **報酬**: 新しい忍者キャラクター解放

## 6. 操作システム

### 6.1 PC操作
- **移動**: WASD または 矢印キー
- **しゃがみ**: Shift押しながら移動
- **隠れる**: 障害物に隣接してSpace
- **忍術**: 1,2,3 キー
- **ポーズ**: P キー

### 6.2 モバイル操作
- **移動**: 仮想十字キー
- **しゃがみ**: しゃがみボタン
- **隠れる**: 隠れるボタン
- **忍術**: 忍術ボタン（3種類）

## 7. UI/UX設計

### 7.1 ゲーム画面
- **メインビュー**: ゲームフィールド（中央）
- **ミニマップ**: 全体俯瞰（右上）
- **ステータス**: 残り宝物数、発見回数（上部）
- **忍術ゲージ**: 使用可能な忍術（下部）

### 7.2 視覚エフェクト
- **発見エフェクト**: 「！」マークとアラート音
- **隠れエフェクト**: プレイヤーの透明度変更
- **宝物取得**: キラキラエフェクト
- **忍術エフェクト**: 煙・分身・透明化の演出

## 8. 技術仕様

### 8.1 開発環境
- **言語**: HTML5, CSS3, JavaScript (ES6+)
- **描画**: Canvas API（2Dゲーム）
- **音響**: Web Audio API
- **保存**: LocalStorage（進行状況）

### 8.2 パフォーマンス
- **フレームレート**: 30FPS（ターン制要素あり）
- **レスポンス**: 入力から16ms以内
- **メモリ**: 30MB以下
- **対応解像度**: 800×600 ～ 1920×1080

## 9. 評価システム

### 9.1 クリアランク
- **Sランク**: ノー発見、最短時間
- **Aランク**: 発見1回以下、標準時間内
- **Bランク**: 発見2回以下
- **Cランク**: クリア（発見3回未満）

### 9.2 統計要素
- **総プレイ時間**: 全ステージ合計
- **完璧クリア数**: Sランククリア回数
- **発見回避率**: 総発見回数/総プレイ回数
- **忍術マスター**: 全忍術を効果的に使用

## 10. ストーリー要素

### 10.1 背景設定
闇夜に紛れて活動する忍者。今夜のミッションは敵の屋敷に侵入し、盗まれた村の宝物を取り戻すこと。しかし屋敷は厳重に警備されており、一度でも見つかれば危険が待っている。

### 10.2 ステージごとのストーリー
1. **修行の館**: まずは基本技術の確認
2. **庭園**: 外堀からの侵入開始  
3. **倉庫**: 宝物の一部を発見
4. **奥座敷**: 重要な宝物に接近
5. **天守閣**: 最後の宝物と脱出

## 11. 拡張要素（フェーズ2）

### 11.1 追加機能
- **カスタムステージ**: プレイヤーが作成可能
- **マルチプレイ**: 協力ミッション
- **日替わりチャレンジ**: 毎日異なるステージ
- **忍者コレクション**: 特殊能力を持つ忍者

### 11.2 難易度オプション
- **ハードモード**: 敵の視界・聴覚強化
- **スピードラン**: 時間制限チャレンジ
- **パーフェクト**: 一度でも発見されたら失敗

## 12. 成果物

### 12.1 ファイル構成
- **index.html**: メインゲーム画面
- **style.css**: 忍者屋敷風デザイン
- **script.js**: ステルスゲームエンジン
- **stages.js**: ステージデータ定義
- **ninja_gif/**: 18個のニンジャGIFファイル
- **sounds/** (オプション): 効果音・BGM

### 12.2 ドキュメント
- **README.md**: ゲーム説明・操作方法
- **STRATEGY.md**: 攻略のヒントとコツ

## 13. 開発スケジュール

1. **フェーズ1**: 基本システム（3-4時間）
   - プレイヤー移動・敵AI・視界システム
2. **フェーズ2**: ゲームロジック（2時間）
   - 宝物回収・クリア判定・UI
3. **フェーズ3**: ステージ作成（1-2時間）
   - 5ステージのデザインと実装
4. **フェーズ4**: 演出・最適化（1時間）
   - エフェクト・音響・モバイル対応

## 14. 成功指標

- **没入感**: プレイヤーが緊張感を感じられる
- **戦略性**: 複数のクリア方法が存在
- **学習曲線**: ステージごとに新しい要素を習得
- **リプレイ性**: より良いランクを目指したくなる

## 15. 承認
- **企画者**: Claude Code
- **作成日**: 2025-07-20
- **対象**: ニンジャの忍び足ゲーム開発

---

## 🎯 特徴的なポイント

### 🔍 **革新的な視界システム**
敵の視線を可視化し、プレイヤーが戦略的に行動できる

### 🎵 **リアルな音響システム**  
足音の大小で敵の反応が変わる、リアルなステルス体験

### 🥷 **18種類のニンジャキャラ**
全てのニンジャGIFを活用した豊富なキャラクター選択

### 🎮 **段階的な学習**
チュートリアルから最終ステージまで、自然に上達できる設計

### 📱 **完全レスポンシブ**
PC・タブレット・スマホ全対応の操作システム
# ニンジャ・テトリス 要件定義書

## 1. プロジェクト概要
- **プロジェクト名**: ニンジャ・テトリス（Ninja Tetris）
- **目的**: ニンジャGIFを使った忍者テーマのテトリス風パズルゲーム
- **概要**: 落下するニンジャブロックを回転・移動させて横一列を揃えて消去する、忍者風味のテトリスゲーム

## 2. システム概要
- **システム名**: ニンジャ・テトリス
- **システムの種類**: Webブラウザゲーム（パズルゲーム）
- **対象ユーザー**: 全年齢、テトリス好き、NINJADAOファン
- **利用環境**: Webブラウザ（PC・タブレット・スマートフォン対応）

## 3. ゲーム仕様

### 3.1 基本ルール
- **フィールドサイズ**: 10×20マス（標準テトリス）
- **落下ブロック**: 7種類のテトリミノ（I, O, T, S, Z, J, L）
- **ブロック表示**: 各マスにニンジャGIFを表示
- **ライン消去**: 横一列が揃ったら消去してスコア獲得
- **ゲームオーバー**: ブロックが最上段に達したら終了

### 3.2 忍者テーマ要素
- **ブロック**: 各ブロックタイプに異なるニンジャGIFを割り当て
- **効果音**: 忍者らしい効果音（シュッ、ドン、など）
- **演出**: ライン消去時に忍者らしいエフェクト
- **背景**: 忍者屋敷や夜空のイメージ

## 4. 操作方法

### 4.1 キーボード操作（PC）
- **A / ←**: 左移動
- **D / →**: 右移動  
- **S / ↓**: 高速落下（ソフトドロップ）
- **W / ↑**: 時計回り回転
- **Q**: 反時計回り回転
- **Space**: 一気に落下（ハードドロップ）
- **P**: ポーズ/再開

### 4.2 タッチ操作（スマホ・タブレット）
- **左エリアタップ**: 左移動
- **右エリアタップ**: 右移動
- **下エリアタップ**: 高速落下
- **ブロックタップ**: 回転
- **スワイプダウン**: ハードドロップ

## 5. 機能要件

### 5.1 基本機能
- ブロック生成・落下システム
- 回転・移動操作処理
- 当たり判定（壁・床・他ブロック）
- ライン消去判定・処理
- スコア計算システム
- レベル・速度調整システム

### 5.2 ゲーム進行機能
- **スコアシステム**: ライン消去数に応じたスコア
- **レベルシステム**: スコアに応じてレベルアップ、落下速度上昇
- **統計情報**: 消去ライン数、プレイ時間、最高スコア記録
- **ポーズ機能**: ゲーム一時停止・再開

### 5.3 忍者演出機能
- **GIFアニメーション**: 各ブロックでニンジャGIF再生
- **ライン消去エフェクト**: 忍者らしい消去アニメーション
- **コンボ演出**: 連続消去時の特別エフェクト
- **BGM/効果音**: 忍者テーマの音響効果

## 6. ブロック設計

### 6.1 テトリミノとGIFの対応
```
I型 (水色): gif.gif, gif(1).gif - 真っ直ぐな忍者
O型 (黄色): gif(2).gif, gif(3).gif - 安定した忍者
T型 (紫色): gif(4).gif, gif(5).gif - バランスの良い忍者
S型 (緑色): gif(6).gif, gif(7).gif - しなやかな忍者
Z型 (赤色): gif(8).gif, gif(9).gif - 機敏な忍者
J型 (青色): gif(10).gif, gif(11).gif - 左足が長い忍者
L型 (橙色): gif(12).gif, gif(13).gif - 右足が長い忍者
```

### 6.2 特殊ブロック（拡張要素）
- **ボーナスブロック**: gif(14).gif～gif(17).gif
- **爆弾ブロック**: 設置すると周囲のブロックも消去
- **レインボーブロック**: どの色とも組み合わせ可能

## 7. スコアシステム

### 7.1 基本スコア
- **1ライン消去**: 100点 × レベル
- **2ライン同時**: 300点 × レベル
- **3ライン同時**: 500点 × レベル  
- **4ライン同時（テトリス）**: 800点 × レベル

### 7.2 ボーナスポイント
- **ソフトドロップ**: 1点/マス
- **ハードドロップ**: 2点/マス
- **連続消去**: コンボ数 × 50点
- **忍者技ボーナス**: 特殊な消去パターンで追加点

## 8. レベルシステム
- **レベル1**: 落下間隔1000ms
- **レベル2**: 落下間隔900ms
- **レベル3**: 落下間隔800ms
- **...**: 100msずつ短縮
- **レベル10以上**: 最大速度100ms維持

## 9. 画面設計

### 9.1 ゲーム画面構成
- **メインフィールド**: 10×20のテトリスフィールド
- **NEXT表示**: 次に来るブロックを最大3個表示
- **HOLD表示**: 保持中のブロック表示
- **スコア表示**: 現在スコア、最高スコア
- **レベル/ライン**: 現在レベル、消去ライン数
- **操作説明**: キーボード/タッチ操作ガイド

### 9.2 忍者テーマUI
- **背景**: 夜の忍者屋敷、満月、桜
- **フレーム**: 和風の装飾枠
- **フォント**: 筆文字風フォント
- **エフェクト**: 落ち葉、手裏剣パーティクル

## 10. 技術要件

### 10.1 開発環境
- **言語**: HTML5, CSS3, JavaScript (ES6+)
- **描画**: Canvas API（スムーズなアニメーション）
- **音響**: Web Audio API / HTML5 Audio
- **ストレージ**: LocalStorage（ハイスコア保存）

### 10.2 パフォーマンス要件
- **フレームレート**: 60FPS維持
- **応答性**: キー入力から16ms以内の反応
- **メモリ使用**: 50MB以下
- **GIF再生**: 各ブロックでスムーズなGIFアニメーション

## 11. レスポンシブ対応

### 11.1 PC版
- **解像度**: 1920×1080推奨
- **操作**: キーボード + マウス
- **表示**: フルサイズゲームフィールド

### 11.2 タブレット版
- **解像度**: 1024×768対応
- **操作**: タッチ操作
- **表示**: 画面に最適化されたサイズ

### 11.3 スマートフォン版
- **解像度**: 375×812対応
- **操作**: タッチ操作 + スワイプ
- **表示**: 縦向き最適化、UI簡素化

## 12. ゲームモード

### 12.1 クラシックモード
- 標準的なテトリスルール
- レベル1からスタート
- エンドレスプレイ

### 12.2 忍者チャレンジモード
- 特定条件での挑戦モード
- 時間制限、目標スコア設定
- 特殊ブロック登場

### 12.3 禅モード
- 時間制限なし、ゆっくりプレイ
- 瞑想的なBGM
- ストレス解消目的

## 13. データ保存

### 13.1 ゲーム設定
```json
{
  "highScore": 0,
  "totalLines": 0,
  "totalGames": 0,
  "averageScore": 0,
  "settings": {
    "bgm": true,
    "effects": true,
    "difficulty": "normal"
  }
}
```

### 13.2 統計情報
- プレイ回数
- 総プレイ時間  
- 各レベル到達回数
- 最高連続消去数

## 14. 拡張機能（フェーズ2）

### 14.1 マルチプレイヤー
- オンライン対戦モード
- フレンドとのスコア競争
- リアルタイム対戦

### 14.2 カスタマイゼーション
- 独自のGIFセット
- 背景テーマ変更
- 効果音カスタマイズ

### 14.3 実績システム
- 各種アチーブメント
- バッジ収集要素
- SNSシェア機能

## 15. 成果物
- **index.html**: メインゲーム画面
- **style.css**: 忍者風テトリスデザイン
- **script.js**: テトリスゲームエンジン
- **ninja_gif/**: 18個のニンジャGIFファイル
- **sounds/** (オプション): 効果音ファイル
- **README.md**: ゲーム説明書

## 16. 開発スケジュール
1. **フェーズ1**: 基本テトリス機能（3時間）
   - ブロック生成・落下・回転・移動
   - ライン消去・スコア計算
2. **フェーズ2**: ニンジャテーマ統合（1時間）
   - GIF表示・アニメーション
   - 忍者風UI・エフェクト
3. **フェーズ3**: タッチ操作・レスポンシブ（1時間）
   - モバイル対応・タッチ操作
4. **フェーズ4**: 最適化・テスト（30分）
   - パフォーマンス調整・バグ修正

## 17. 成功指標
- **操作性**: 遅延なくスムーズなブロック操作
- **視覚効果**: GIFアニメーションの美しい表示
- **ゲーム性**: 通常のテトリスと同等の面白さ
- **忍者感**: 忍者テーマが十分に表現されている

## 18. 承認
- **作成者**: Claude Code
- **作成日**: 2025-07-20  
- **対象**: ニンジャ・テトリス開発